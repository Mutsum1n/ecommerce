<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>销售报表 - 卖家</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">
    <link href="/css/style.css" rel="stylesheet">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container">
        <a class="navbar-brand" href="/seller">卖家中心</a>
        <div class="navbar-nav">
            <a class="nav-link" href="/seller/products">商品管理</a>
            <a class="nav-link" href="/seller/orders">订单管理</a>
            <a class="nav-link active" href="/seller/reports">销售报表</a>
            <a class="nav-link" href="/seller/customers">客户管理</a>
            <a class="nav-link text-light" href="/products">返回商品页</a>
        </div>
    </div>
</nav>
<div class="container mt-4">
    <h2><i class="bi bi-bar-chart"></i> 销售报表</h2>
    <div class="row mt-3">
        <div class="col-md-3 col-sm-6">
            <div class="card stat-card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                <div class="card-body">
                    <div class="d-flex justify-content-between">
                        <div>
                            <div class="stat-value" th:text="'¥' + ${#numbers.formatDecimal(todayRevenue, 1, 2)}">¥0</div>
                            <div class="stat-label">今日销售额</div>
                        </div>
                        <div class="stat-icon"><i class="bi bi-currency-dollar"></i></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-3 col-sm-6">
            <div class="card stat-card" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                <div class="card-body">
                    <div class="d-flex justify-content-between">
                        <div>
                            <div class="stat-value" th:text="'¥' + ${#numbers.formatDecimal(weekRevenue, 1, 2)}">¥0</div>
                            <div class="stat-label">本周销售额</div>
                        </div>
                        <div class="stat-icon"><i class="bi bi-calendar-week"></i></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-3 col-sm-6">
            <div class="card stat-card" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                <div class="card-body">
                    <div class="d-flex justify-content-between">
                        <div>
                            <div class="stat-value" th:text="'¥' + ${#numbers.formatDecimal(monthRevenue, 1, 2)}">¥0</div>
                            <div class="stat-label">本月销售额</div>
                        </div>
                        <div class="stat-icon"><i class="bi bi-calendar-month"></i></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-3 col-sm-6">
            <div class="card stat-card" style="background: linear-gradient(135deg, #FFD700 0%, #FF8C00 100%);">
                <div class="card-body">
                    <div class="d-flex justify-content-between">
                        <div>
                            <div class="stat-value" th:text="'¥' + ${#numbers.formatDecimal(totalRevenue, 1, 2)}">¥0</div>
                            <div class="stat-label">总销售额</div>
                        </div>
                        <div class="stat-icon"><i class="bi bi-trophy-fill"></i></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row mt-4">
        <div class="col-md-12">
            <div class="chart-container">
                <h5><i class="bi bi-table"></i> 订单统计详情</h5>
                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead>
                        <tr>
                            <th>订单状态</th>
                            <th>订单数量</th>
                            <th>占比</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td><span class="badge bg-info">已付款</span></td>
                            <td th:text="${orderStats.paidOrders}">0</td>
                            <td th:text="${orderStats.totalOrders > 0 ? #numbers.formatDecimal((orderStats.paidOrders * 1.0) / orderStats.totalOrders * 100, 1, 2) : 0} + '%'">0%</td>
                        </tr>
                        <tr>
                            <td><span class="badge bg-primary">已发货</span></td>
                            <td th:text="${orderStats.shippedOrders}">0</td>
                            <td th:text="${orderStats.totalOrders > 0 ? #numbers.formatDecimal((orderStats.shippedOrders * 1.0) / orderStats.totalOrders * 100, 1, 2) : 0} + '%'">0%</td>
                        </tr>
                        <tr>
                            <td><span class="badge bg-success">已送达</span></td>
                            <td th:text="${orderStats.deliveredOrders}">0</td>
                            <td th:text="${orderStats.totalOrders > 0 ? #numbers.formatDecimal((orderStats.deliveredOrders * 1.0) / orderStats.totalOrders * 100, 1, 2) : 0} + '%'">0%</td>
                        </tr>
                        <tr>
                            <td><span class="badge bg-success" style="background-color: #28a745 !important;">已完成</span></td>
                            <td th:text="${orderStats.completedOrders}">0</td>
                            <td th:text="${orderStats.totalOrders > 0 ? #numbers.formatDecimal((orderStats.completedOrders * 1.0) / orderStats.totalOrders * 100, 1, 2) : 0} + '%'">0%</td>
                        </tr>
                        <tr>
                            <td><span class="badge bg-danger">已取消</span></td>
                            <td th:text="${orderStats.cancelledOrders}">0</td>
                            <td th:text="${orderStats.totalOrders > 0 ? #numbers.formatDecimal((orderStats.cancelledOrders * 1.0) / orderStats.totalOrders * 100, 1, 2) : 0} + '%'">0%</td>
                        </tr>
                        <tr>
                            <td><span class="badge bg-warning">已退款</span></td>
                            <td th:text="${orderStats.refundedOrders}">0</td>
                            <td th:text="${orderStats.totalOrders > 0 ? #numbers.formatDecimal((orderStats.refundedOrders * 1.0) / orderStats.totalOrders * 100, 1, 2) : 0} + '%'">0%</td>
                        </tr>
                        <tr class="table-secondary">
                            <td><strong>总计</strong></td>
                            <td th:text="${orderStats.totalOrders}">0</td>
                            <td>100%</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>